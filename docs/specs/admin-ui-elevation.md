# Admin UI Elevation Specification\n\n**PRIORITY: LAST (Milestone M10)**\n\nAdmin UI elevation is a secondary phase, focused on operational dashboards and business analytics after core revenue flow (storefront, payments, shipping, loyalty) is mature.\n\n## Dashboard Overview\n\n### Key Metrics Cards\n\n**Today's Revenue**\n- Total sales amount\n- Order count\n- Avg order value (AOV)\n- Comparison to yesterday + trend arrow\n\n**Top Products**\n- Top 5 SKUs by quantity sold\n- List: product name, SKU, qty, revenue\n- Link to product detail\n\n**Top Customers**\n- Top 10 customers by lifetime value\n- List: customer name, email, total spent, order count\n- Link to customer profile\n\n**Low Stock Alerts**\n- Products below reorder threshold\n- List: product, current stock, threshold\n- \"Reorder\" button (placeholder; integration future)\n\n**Fulfillment Backlog**\n- Orders in \"Paid\" state (awaiting picking)\n- Count + \"View orders\" link\n- Status: \"X orders ready to pick\"\n\n**Refunds**\n- Refund requests in last 24 hours\n- Count, total amount, approval links\n\n## Operations Views\n\n### Orders Board (Kanban)\n\n**Columns**: Paid → Picking → Picked → Shipped → Delivered\n\n**Card**: order ID, customer name, total, item count, payment method\n\n**Actions**:\n- Drag to next column (state transition)\n- Click: open order detail\n- Context menu: mark as picked, print label (future)\n\n**Filters**: date range, customer, payment status, fulfillment status\n\n### Picking List (Print)\n\n**Trigger**: admin clicks \"Generate Picking List\"\n\n**Output**: printable/PDF view\n- Sort by: shelf location or collection\n- For each product: SKU, qty, warehouse location, barcode\n- Batch ID + date\n- Checkboxes for picking confirmation\n\n**Integration**: future; currently manual\n\n### Shipping Export Monitor\n\n**View**: list of export batches\n- Batch ID, timestamp, order count, status (pending/success/failed)\n- File size, upload latency\n- Retry count\n\n**Actions**:\n- \"View details\" → see order list in batch\n- \"Re-export\" → trigger manual re-export\n- \"Download log\" → CSV of export events\n\n**Alerts**:\n- Failed batch → red badge\n- >100 orders in pending state → warning\n\n## Admin Extensions (Vendure React)\n\n### Navigation\n- Add \"Fulfillment\" section to left sidebar\n  - Orders Board\n  - Picking List\n  - Shipping Monitor\n- Add \"Analytics\" section\n  - Dashboard\n  - Reports (CSV export)\n\n### Payment Timeline Display\n\n**Order detail page enhancement**:\n- New \"Payment\" tab showing:\n  - Payment method (GPG Checkout, etc.)\n  - Timeline: Authorized → Captured → Refunded (if applicable)\n  - Each state: timestamp, transaction ID, amount\n  - Manual action buttons: \"Capture\", \"Refund\" (if state allows)\n  - Webhook log: all events with timestamps and signature validation status\n\n### Manual Capture/Refund Hooks\n\n**Button: \"Capture Payment\"** (visible if state = Authorized, >24h old)\n- Confirmation dialog: \"Capture $X.XX?\"\n- Click → POST to API endpoint → update payment state\n- Result: success/failure message + order state refresh\n\n**Button: \"Refund\"** (visible if state = Captured)\n- Modal: select full or partial refund + reason dropdown\n- Click → POST to API endpoint\n- Result: refund initiated; payment state transitions to Refunded\n\n## CSV Export Columns (Per Widget)\n\n### Top Products\n```\nSKU, Product Name, Qty Sold, Revenue, Avg Price, Rating\n```\n\n### Top Customers\n```\nCustomer ID, Name, Email, Total Spent, Order Count, Last Order Date\n```\n\n### Low Stock\n```\nSKU, Product Name, Current Stock, Threshold, Variance\n```\n\n### Orders Board\n```\nOrder ID, Customer Email, Total, Items, Status, Created Date, Last Updated\n```\n\n### Fulfillment Backlog\n```\nOrder ID, Customer, Address, Item SKUs, Item Qtys, Payment Method, Awaiting (hours)\n```\n\n## Reporting (Future)\n\n### Sales Report\n- Date range\n- Total revenue, order count, avg order value\n- Revenue by payment method, fulfillment status\n- Export to CSV\n\n### Inventory Report\n- Stock levels by product\n- Movements (in/out) by date\n- Reorder alerts\n- Export to CSV\n\n### Customer Report\n- Customer segment (new, repeat, high-value)\n- Lifetime value distribution\n- Cohort analysis (e.g., customers acquired in Oct)\n\n## Reconciliation Dashboard (Payment-specific)\n\n**Purpose**: daily payment reconciliation for GPG Checkout\n\n**View**:\n- Orders in \"Authorized\" state for >24 hours\n- Count, total amount\n- Link to order detail\n- \"Capture all\" button (batch operation)\n\n**Alerts**:\n- Signature validation failures (fraud warning)\n- Failed webhook retries (>5 in past hour)\n- Transaction discrepancies (GPG vs. Vendure states differ)\n\n## Role-Based Access\n\n**Admin roles** (Vendure built-in):\n- **Superadmin**: full access to all views\n- **Fulfillment Manager**: Orders Board, Picking List, Shipping Monitor (read-only payments)\n- **Finance**: Dashboard, Payment reconciliation, Refunds\n- **Customer Service**: Orders Board (read-only), customer detail, refund approval\n\n**Future**: custom role builder for granular permissions\n\n## Monitoring & Alerts\n\n### Alert Channels\n- **In-app**: badge on relevant admin views (e.g., red dot on Fulfillment if >10 pending orders)\n- **Email**: daily summary (7 AM) + critical alerts (payment failures, >5 failed exports)\n- **Slack** (future): integration for real-time ops alerts\n\n### Critical Alerts\n- Payment webhook signature validation failure\n- Export batch failed 3 times (manual intervention needed)\n- >20 orders pending fulfillment >48 hours\n- Inventory negative (data integrity issue)\n\n## Implementation Notes\n\n- **Vendure Admin React SDK**: build extensions as React components\n- **GraphQL**: queries for dashboard metrics, mutations for manual actions\n- **Permissions**: check user role before exposing views/actions\n- **Performance**: cache dashboard data for 5 min (allow manual refresh)\n- **Accessibility**: WCAG 2.1 AA compliance; keyboard navigation\n\n## Acceptance Criteria (M10)\n\n- [ ] Dashboard displays correct revenue, AOV, top products\n- [ ] Orders board Kanban allows drag-to-transition state changes\n- [ ] Picking list generates printable format with correct data\n- [ ] Shipping export monitor shows batch status and re-export works\n- [ ] Manual capture/refund buttons trigger API calls correctly\n- [ ] Role-based access restricts unauthorized views\n- [ ] CSV exports have correct column structure and data\n- [ ] Alerts appear for critical conditions\n- [ ] Mobile-responsive (admin views accessible on iPad)\n